<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Paperima | Paperize your Images</title>
    <link rel="icon" type="image/png" href="./assets/icon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="./assets/icon/favicon.svg" />
    <link rel="shortcut icon" href="./assets/icon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="./assets/icon/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="Paperima" />
    <link rel="manifest" href="./assets/site.webmanifest" />
    <meta name="robots" content="noindex, follow">
    <link href="./assets/tailwind.css" rel="stylesheet">
    <link href="./assets/styles.css" rel="stylesheet">
</head>
<body class="bg-slate-900 relative">
    <!-- SVG filter definition for the torn edge effect -->
    <svg width="0" height="0" style="position:absolute; z-index: -1;">
        <defs>
            <filter id="combined-filter" x="-50%" y="-50%" width="200%" height="200%">
                <!-- Dilate the source image to create the stroke thickness -->
                <feMorphology id="torn-dilate" in="SourceGraphic" operator="dilate" radius="10" result="dilatedShape"/>
                <!-- Generate fractal noise -->
                <feTurbulence id="torn-turbulence" type="fractalNoise" baseFrequency="0.02" numOctaves="3" result="tornNoise"/>
                <!-- Use the noise to displace the edges of the dilated shape -->
                <feDisplacementMap id="torn-displacement" in="dilatedShape" in2="tornNoise" scale="15" xChannelSelector="R" yChannelSelector="G" result="tornEdgeShape"/>
                <!-- Create a solid color for the stroke -->
                <feFlood id="torn-flood" flood-color="#FFFFFF" result="strokeColor"/>
                <!-- Combine the color with the torn edge shape -->
                <feComposite in="strokeColor" in2="tornEdgeShape" operator="in" result="coloredTornEdge"/>
                <!-- Merge the torn edge stroke with the original image -->
                <feMerge>
                    <feMergeNode in="coloredTornEdge"/>
                    <feMergeNode in="SourceGraphic"/>
                </feMerge>
            </filter>
        </defs>
    </svg>

    <!-- Main container for the canvas -->
    <main id="canvas-container" class="w-screen h-screen flex items-center justify-center p-10">
        <div id="canvas-wrapper" class="shadow-lg border-4 border-[var(--border-color)]">
            <canvas id="main-canvas"></canvas>
        </div>        
    </main>

    <!-- Settings panel wrapper -->
    <div id="desktop-resizer" class="desktop-only z-50"></div>
    <div id="settings-panel-wrapper" class="absolute inset-y-0 right-0 h-full w-full transition-transform duration-300 ease-in-out z-40">
        <!-- Handle to open/close the settings panel on desktop -->
        <button id="panel-handle" class="main-handle" aria-label="Toggle settings">
            <svg id="handle-icon-closed" class="w-7 h-7" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 1L21.5 6.5V17.5L12 23L2.5 17.5V6.5L12 1ZM12 3.311L4.5 7.65311V16.3469L12 20.689L19.5 16.3469V7.65311L12 3.311ZM12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12C16 14.2091 14.2091 16 12 16ZM12 14C13.1046 14 14 13.1046 14 12C14 10.8954 13.1046 10 12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14Z"></path></svg>
            <svg id="handle-icon-open" class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M10.5859 12L2.79297 4.20706L4.20718 2.79285L12.0001 10.5857L19.793 2.79285L21.2072 4.20706L13.4143 12L21.2072 19.7928L19.793 21.2071L12.0001 13.4142L4.20718 21.2071L2.79297 19.7928L10.5859 12Z"></path></svg>
        </button>
        <!-- Tab handles for desktop -->
        <button id="handle-object" class="tab-handle active" aria-label="Object">
            <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M7 3C6.44772 3 6 3.44772 6 4V7H3C2.44772 7 2 7.44772 2 8V20C2 20.5523 2.44772 21 3 21H17C17.5523 21 18 20.5523 18 20V17H21C21.5523 17 22 16.5523 22 16V4C22 3.44772 21.5523 3 21 3H7ZM17 7H8V5H20V15H18V8C18 7.44772 17.5523 7 17 7ZM16 9V15.7394L11.4911 11.6404L4 18.6321V9H16ZM11.5089 14.3596L16 18.4424V19H6.53702L11.5089 14.3596ZM7 13.5C7.82843 13.5 8.5 12.8284 8.5 12C8.5 11.1716 7.82843 10.5 7 10.5C6.17157 10.5 5.5 11.1716 5.5 12C5.5 12.8284 6.17157 13.5 7 13.5Z"></path></svg>
        </button>
        <button id="handle-background" class="tab-handle" aria-label="Background">
            <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M21 3C21.5523 3 22 3.44772 22 4V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V4C2 3.44772 2.44772 3 3 3H21ZM20 5H4V19H20V5ZM13 17V15H16V12H18V17H13ZM11 7V9H8V12H6V7H11Z"></path></svg>
        </button>
        <button id="handle-animasi" class="tab-handle" aria-label="Animation">
            <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM4 5V19H20V5H4ZM10.6219 8.41459L15.5008 11.6672C15.6846 11.7897 15.7343 12.0381 15.6117 12.2219C15.5824 12.2658 15.5447 12.3035 15.5008 12.3328L10.6219 15.5854C10.4381 15.708 10.1897 15.6583 10.0672 15.4745C10.0234 15.4088 10 15.3316 10 15.2526V8.74741C10 8.52649 10.1791 8.34741 10.4 8.34741C10.479 8.34741 10.5562 8.37078 10.6219 8.41459Z"></path></svg>
        </button>
        <button id="handle-info" class="tab-handle" aria-label="Preferences">
            <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 14V16C8.68629 16 6 18.6863 6 22H4C4 17.5817 7.58172 14 12 14ZM12 13C8.685 13 6 10.315 6 7C6 3.685 8.685 1 12 1C15.315 1 18 3.685 18 7C18 10.315 15.315 13 12 13ZM12 11C14.21 11 16 9.21 16 7C16 4.79 14.21 3 12 3C9.79 3 8 4.79 8 7C8 9.21 9.79 11 12 11ZM14.5946 18.8115C14.5327 18.5511 14.5 18.2794 14.5 18C14.5 17.7207 14.5327 17.449 14.5945 17.1886L13.6029 16.6161L14.6029 14.884L15.5952 15.4569C15.9883 15.0851 16.4676 14.8034 17 14.6449V13.5H19V14.6449C19.5324 14.8034 20.0116 15.0851 20.4047 15.4569L21.3971 14.8839L22.3972 16.616L21.4055 17.1885C21.4673 17.449 21.5 17.7207 21.5 18C21.5 18.2793 21.4673 18.551 21.4055 18.8114L22.3972 19.3839L21.3972 21.116L20.4048 20.543C20.0117 20.9149 19.5325 21.1966 19.0001 21.355V22.5H17.0001V21.3551C16.4677 21.1967 15.9884 20.915 15.5953 20.5431L14.603 21.1161L13.6029 19.384L14.5946 18.8115ZM18 19.5C18.8284 19.5 19.5 18.8284 19.5 18C19.5 17.1716 18.8284 16.5 18 16.5C17.1716 16.5 16.5 17.1716 16.5 18C16.5 18.8284 17.1716 19.5 18 19.5Z"></path></svg>
        </button>

        <!-- The actual settings panel -->
        <aside id="settings-panel" class="w-full h-full bg-[var(--bg-panel)] flex flex-col flex-shrink-0 border-l border-t border-b border-[var(--border-color)]">
            <!-- Desktop header for the panel -->
            <div class="desktop-header sticky top-0 bg-[var(--bg-header)] z-10 flex items-center justify-between p-4 border-b border-[var(--border-color)]">
                <h2 id="panel-title" class="text-lg font-bold text-slate-100" data-translate-key="settings"></h2>
                <button id="export-video-btn-header" class="flex items-center justify-center w-auto px-4 py-2 bg-[var(--accent-color)] text-white text-sm font-semibold hover:bg-[var(--accent-color-hover)] transition-all duration-150 cursor-pointer" data-translate-key="export"></button>
            </div>
            <!-- Mobile header for the panel (draggable) -->
            <div id="mobile-panel-header"></div>
            
            <!-- Scrollable container for all controls -->
            <div class="overflow-y-auto controls-panel flex-grow p-4 md:p-4">
                <!-- Background Tab Content -->
                <div id="background-tab-content" class="tab-content space-y-4 md:space-y-4">
                    <h2 class="text-lg font-bold text-slate-300" data-translate-key="canvas"></h2>
                    <!-- Aspect Ratio Controls -->
                    <div id="aspect-ratio-controls">
                        <label class="text-sm font-medium text-[var(--text-muted)]" data-translate-key="previewAspectRatio"></label>
                        <div id="aspect-ratio-btns" class="grid grid-cols-5 gap-2 md:gap-2 mt-2 btn-group-toggle">
                            <button data-ratio="9/16" class="p-2.5 px-2 py-1.5 border-2 border-[var(--border-color)] text-[var(--text-muted)] text-xs font-medium transition-all duration-150">9:16</button>
                            <button data-ratio="16/9" class="p-2.5 px-2 py-1.5 border-2 border-[var(--border-color)] text-[var(--text-muted)] text-xs font-medium transition-all duration-150 active">16:9</button>
                            <button data-ratio="4/3" class="p-2.5 px-2 py-1.5 border-2 border-[var(--border-color)] text-[var(--text-muted)] text-xs font-medium transition-all duration-150">4:3</button>
                            <button data-ratio="3/4" class="p-2.5 px-2 py-1.5 border-2 border-[var(--border-color)] text-[var(--text-muted)] text-xs font-medium transition-all duration-150">3:4</button>
                            <button data-ratio="1/1" class="p-2.5 px-2 py-1.5 border-2 border-[var(--border-color)] text-[var(--text-muted)] text-xs font-medium transition-all duration-150">1:1</button>
                        </div>
                    </div>
                    <!-- Solid Background Color -->
                    <div id="background-color-control" class="mt-4 pt-4 border-t border-[var(--border-color)]">
                        <label for="background-color" class="text-sm font-medium text-[var(--text-muted)]" data-translate-key="solidBackgroundColor"></label>
                        <input type="color" id="background-color" value="#00ff00" class="w-full h-10 mt-2 p-1 bg-slate-900 border border-[var(--border-color)] cursor-pointer">
                    </div>
                    <!-- Background Image Upload -->
                    <div class="space-y-2 md:space-y-2 mt-4 pt-4 border-t border-[var(--border-color)]">
                        <h2 class="text-lg font-bold text-slate-300" data-translate-key="backgroundImage"></h2>
                        <label for="background-image-upload" id="background-drop-zone" class="group relative flex flex-col items-center justify-center w-full h-32 md:h-32 px-4 md:px-4 py-2 md:py-2 border-2 border-dashed border-[var(--border-color)] cursor-pointer transition-colors">
                            <div id="background-drop-zone-prompt" class="flex flex-col items-center justify-center pointer-events-none w-full h-full">
                                <svg class="w-8 h-8 text-[var(--text-muted)] group-hover:text-[var(--accent-color)] transition-colors flex-shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M21 15V18H24V20H21V23H19V20H16V18H19V15H21ZM21.0082 3C21.556 3 22 3.44495 22 3.9934V13H20V5H4V18.999L14 9L17 12V14.829L14 11.8284L6.827 19H14V21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082ZM8 7C9.10457 7 10 7.89543 10 9C10 10.1046 9.10457 11 8 11C6.89543 11 6 10.1046 6 9C6 7.89543 6.89543 7 8 7Z"></path></svg>
                                <p class="text-sm text-[var(--text-muted)] group-hover:text-[var(--accent-color)] transition-colors text-center mt-2 leading-tight" data-translate-key="dropImagePrompt"></p>
                            </div>
                            <div id="background-drop-zone-filename" class="hidden text-center pointer-events-none p-2">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-10 h-10 mx-auto mb-2 text-green-500"><path d="M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM5 13.9289V19H8.1005L11.0858 16.0147L7 11.9289L5 13.9289ZM10.9289 19H19V16.9289L16 13.9289L10.9289 19ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"></path></svg>
                                <p class="text-sm font-semibold text-slate-300 break-all"></p>
                            </div>
                            <button id="remove-background-image" class="drop-zone-delete-btn hidden">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M7 4V2H17V4H22V6H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V6H2V4H7ZM6 6V20H18V6H6ZM9 9H11V17H9V9ZM13 9H15V17H13V9Z"></path></svg>
                            </button>
                        </label>
                        <input type="file" id="background-image-upload" class="hidden" accept="image/png, image/jpeg, image/webp, image/svg+xml">
                    </div>
                    <!-- Background Transform Accordion -->
                    <div class="accordion-section border border-[var(--border-color)]" id="background-transform-accordion">
                        <div class="accordion-header w-full flex items-center justify-between p-4 md:p-4 transition-colors duration-200 cursor-pointer">
                            <div class="flex items-center gap-3 md:gap-3">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="accordion-chevron transition-transform duration-300 text-[var(--text-muted)]"><path d="m6 9 6 6 6-6"/></svg>
                                <h2 class="text-base font-semibold text-slate-300" data-translate-key="backgroundTransform"></h2>
                            </div>
                                <button class="reset-section-btn" data-section-key="background.transform" data-translate-key-title="resetBackgroundTransformTitle">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M22 12C22 17.5228 17.5229 22 12 22C6.4772 22 2 17.5228 2 12C2 6.47715 6.4772 2 12 2V4C7.5817 4 4 7.58172 4 12C4 16.4183 7.5817 20 12 20C16.4183 20 20 16.4183 20 12C20 9.25022 18.6127 6.82447 16.4998 5.38451L16.5 8H14.5V2L20.5 2V4L18.0008 3.99989C20.4293 5.82434 22 8.72873 22 12Z"></path></svg>
                                </button>
                        </div>
                        <div class="accordion-body space-y-4 md:space-y-4 p-4 md:p-4 border-t border-[var(--border-color)] hidden">
                            <div id="background-mode-controls">
                                <label class="text-sm font-medium text-[var(--text-muted)]" data-translate-key="backgroundMode"></label>
                                <div id="background-mode-btns" class="grid grid-cols-2 gap-2 md:gap-2 mt-2 btn-group-toggle">
                                    <button data-mode="fill" class="p-2.5 px-2 py-1.5 border-2 border-[var(--border-color)] text-[var(--text-muted)] text-sm font-medium transition-all duration-150" data-translate-key="fill"></button>
                                    <button data-mode="stretch" class="p-2.5 px-2 py-1.5 border-2 border-[var(--border-color)] text-[var(--text-muted)] text-sm font-medium transition-all duration-150" data-translate-key="stretch"></button>
                                </div>
                            </div>
                            <div id="background-size-control">
                                <label class="text-sm font-medium text-[var(--text-muted)] mb-2 block" data-translate-key="backgroundSize"></label>
                                <div class="flex items-center gap-3 md:gap-3"><input type="range" id="background-size" min="10" max="200" value="100" class="w-full slider"><input type="number" id="background-size-input" min="10" max="200" value="100" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm focus:ring-[var(--accent-color)] focus:border-[var(--accent-color)]"></div>
                            </div>
                            <div id="background-offset-x-control">
                                <label class="text-sm font-medium text-[var(--text-muted)] mb-2 block" data-translate-key="offsetX"></label>
                                <div class="flex items-center gap-3 md:gap-3"><input type="range" id="background-offset-x" min="-150" max="150" value="0" class="w-full slider"><input type="number" id="background-offset-x-input" min="-150" max="150" value="0" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm focus:ring-[var(--accent-color)] focus:border-[var(--accent-color)]"></div>
                            </div>
                            <div id="background-offset-y-control">
                                <label class="text-sm font-medium text-[var(--text-muted)] mb-2 block" data-translate-key="offsetY"></label>
                                <div class="flex items-center gap-3 md:gap-3"><input type="range" id="background-offset-y" min="-150" max="150" value="0" class="w-full slider"><input type="number" id="background-offset-y-input" min="-150" max="150" value="0" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm focus:ring-[var(--accent-color)] focus:border-[var(--accent-color)]"></div>
                            </div>
                            <div id="background-rotation-control">
                                <label id="background-rotation-label" class="text-sm font-medium text-[var(--text-muted)] mb-2 block" data-translate-key="rotation">Rotasi</label>
                                <div class="flex items-center gap-3 md:gap-3">
                                    <input type="range" id="background-rotation" min="-180" max="180" value="0" step="1" class="w-full slider">
                                    <input type="number" id="background-rotation-input" value="0" step="1" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm">
                                </div>
                            </div>                            
                        </div>
                    </div>
                    <!-- Background Blur Accordion -->
                    <div class="accordion-section border border-[var(--border-color)]" id="background-blur-accordion">
                        <div class="accordion-header w-full flex items-center justify-between p-4 md:p-4 transition-colors duration-200 cursor-pointer">
                            <div class="flex items-center gap-3 md:gap-3">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="accordion-chevron transition-transform duration-300 text-[var(--text-muted)]"><path d="m6 9 6 6 6-6"/></svg>
                                <h2 class="text-base font-semibold text-slate-300" data-translate-key="backgroundBlur"></h2>
                            </div>
                            <div class="flex items-center">
                                <button class="reset-section-btn" data-section-key="background.effects.blur" data-translate-key-title="resetBackgroundBlurTitle">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M22 12C22 17.5228 17.5229 22 12 22C6.4772 22 2 17.5228 2 12C2 6.47715 6.4772 2 12 2V4C7.5817 4 4 7.58172 4 12C4 16.4183 7.5817 20 12 20C16.4183 20 20 16.4183 20 12C20 9.25022 18.6127 6.82447 16.4998 5.38451L16.5 8H14.5V2L20.5 2V4L18.0008 3.99989C20.4293 5.82434 22 8.72873 22 12Z"></path></svg>
                                </button>
                                <label class="switch"><input type="checkbox" id="background-blur-enabled-switch"><span class="toggle-slider"></span></label>
                            </div>
                        </div>
                        <div class="accordion-body space-y-4 md:space-y-4 p-4 md:p-4 border-t border-[var(--border-color)] hidden">
                            <div>
                                <label class="text-sm font-medium text-[var(--text-muted)] mb-2 block" data-translate-key="intensity"></label>
                                <div class="flex items-center gap-3 md:gap-3"><input type="range" id="background-blur-intensity" min="0" max="20" value="10" step="0.1" class="w-full slider"><input type="number" id="background-blur-intensity-input" min="0" max="20" value="10" step="0.1" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm"></div>
                            </div>
                        </div>
                    </div>
                    <!-- Background Vignette Accordion -->
                    <div class="accordion-section border border-[var(--border-color)]" id="background-vignette-accordion">
                        <div class="accordion-header w-full flex items-center justify-between p-4 md:p-4 transition-colors duration-200 cursor-pointer">
                            <div class="flex items-center gap-3 md:gap-3">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="accordion-chevron transition-transform duration-300 text-[var(--text-muted)]"><path d="m6 9 6 6 6-6"/></svg>
                                <h2 class="text-base font-semibold text-slate-300" data-translate-key="backgroundVignette"></h2>
                            </div>
                            <div class="flex items-center">
                                <button class="reset-section-btn" data-section-key="background.effects.vignette" data-translate-key-title="resetBackgroundVignetteTitle">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M22 12C22 17.5228 17.5229 22 12 22C6.4772 22 2 17.5228 2 12C2 6.47715 6.4772 2 12 2V4C7.5817 4 4 7.58172 4 12C4 16.4183 7.5817 20 12 20C16.4183 20 20 16.4183 20 12C20 9.25022 18.6127 6.82447 16.4998 5.38451L16.5 8H14.5V2L20.5 2V4L18.0008 3.99989C20.4293 5.82434 22 8.72873 22 12Z"></path></svg>
                                </button>
                                <label class="switch"><input type="checkbox" id="background-vignette-enabled-switch"><span class="toggle-slider"></span></label>
                            </div>
                        </div>
                        <div class="accordion-body space-y-4 md:space-y-4 p-4 md:p-4 border-t border-[var(--border-color)] hidden">
                            <div>
                                <label class="text-sm font-medium text-[var(--text-muted)] mb-2 block" data-translate-key="opacity"></label>
                                <div class="flex items-center gap-3 md:gap-3"><input type="range" id="background-vignette-opacity" min="0" max="100" value="100" class="w-full slider"><input type="number" id="background-vignette-opacity-input" min="0" max="100" value="100" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm"></div>
                            </div>
                            <div>
                                <label class="text-sm font-medium text-[var(--text-muted)] mb-2 block" data-translate-key="radius"></label>
                                <div class="flex items-center gap-3 md:gap-3"><input type="range" id="background-vignette-radius" min="0" max="100" value="0" class="w-full slider"><input type="number" id="background-vignette-radius-input" min="0" max="100" value="0" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm"></div>
                            </div>
                            <div>
                                <label class="text-sm font-medium text-[var(--text-muted)] mb-2 block" data-translate-key="feather"></label>
                                <div class="flex items-center gap-3 md:gap-3"><input type="range" id="background-vignette-feather" min="0" max="100" value="100" class="w-full slider"><input type="number" id="background-vignette-feather-input" min="0" max="100" value="100" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm"></div>
                            </div>
                            <div>
                                <label for="background-vignette-color" class="text-sm font-medium text-[var(--text-muted)]" data-translate-key="vignetteColor"></label>
                                <input type="color" id="background-vignette-color" value="#000000" class="w-full h-10 mt-2 p-1 bg-slate-900 border border-[var(--border-color)] cursor-pointer">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Background Color Correction Accordion -->
                    <div class="accordion-section border border-[var(--border-color)]" id="background-color-correction-accordion">
                        <div class="accordion-header w-full flex items-center justify-between p-4 md:p-4 transition-colors duration-200 cursor-pointer">
                            <div class="flex items-center gap-3 md:gap-3">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="accordion-chevron transition-transform duration-300 text-[var(--text-muted)]"><path d="m6 9 6 6 6-6"/></svg>
                                <h2 class="text-base font-semibold text-slate-300" data-translate-key="backgroundColorCorrection"></h2>
                            </div>
                            <div class="flex items-center">
                                <button class="reset-section-btn" data-section-key="background.effects.colorCorrection" data-translate-key-title="resetBackgroundColorCorrectionTitle">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M22 12C22 17.5228 17.5229 22 12 22C6.4772 22 2 17.5228 2 12C2 6.47715 6.4772 2 12 2V4C7.5817 4 4 7.58172 4 12C4 16.4183 7.5817 20 12 20C16.4183 20 20 16.4183 20 12C20 9.25022 18.6127 6.82447 16.4998 5.38451L16.5 8H14.5V2L20.5 2V4L18.0008 3.99989C20.4293 5.82434 22 8.72873 22 12Z"></path></svg>
                                </button>
                                <label class="switch"><input type="checkbox" id="background-color-correction-enabled-switch"><span class="toggle-slider"></span></label>
                            </div>
                        </div>
                        <div class="accordion-body space-y-4 md:space-y-4 p-4 md:p-4 border-t border-[var(--border-color)] hidden">
                            <div>
                                <label class="text-sm font-medium text-[var(--text-muted)] mb-2 block" data-translate-key="hue"></label>
                                <div class="flex items-center gap-3 md:gap-3"><input type="range" id="background-color-hue" min="-180" max="180" value="0" class="w-full slider"><input type="number" id="background-color-hue-input" min="-180" max="180" value="0" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm"></div>
                            </div>
                            <div id="background-color-correction-standard-controls" class="space-y-4">
                                <div>
                                    <label class="text-sm font-medium text-[var(--text-muted)] mb-2 block" data-translate-key="saturation"></label>
                                    <div class="flex items-center gap-3 md:gap-3"><input type="range" id="background-color-saturation" min="-100" max="100" value="0" class="w-full slider"><input type="number" id="background-color-saturation-input" min="-100" max="100" value="0" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm"></div>
                                </div>
                                <div>
                                    <label class="text-sm font-medium text-[var(--text-muted)] mb-2 block" data-translate-key="brightness"></label>
                                    <div class="flex items-center gap-3 md:gap-3"><input type="range" id="background-color-brightness" min="-100" max="100" value="0" class="w-full slider"><input type="number" id="background-color-brightness-input" min="-100" max="100" value="0" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm"></div>
                                </div>
                            </div>
                            <div class="flex items-center space-x-2 pt-2 border-t border-slate-700">
                                <input type="checkbox" id="background-colorize-switch" class="h-4 w-4 bg-slate-600 border-slate-500 text-[var(--accent-color)] focus:ring-[var(--accent-color)]">
                                <label for="background-colorize-switch" class="text-sm text-slate-300" data-translate-key="colorize"></label>
                            </div>
                        </div>
                    </div>
                    <div class="space-y-4 md:space-y-4 pt-4 border-t border-[var(--border-color)] mt-4">
                        <button id="reset-settings-btn-background" class="reset-all-btn flex items-center justify-center gap-2 md:gap-2 w-full px-5 py-3 bg-[var(--danger-color)] text-white text-sm font-semibold hover:bg-[var(--danger-color-hover)] transition-all duration-150 cursor-pointer" data-translate-key="resetAll"></button>
                    </div>                    
                </div>
                <!-- Object Tab Content -->
                <div id="object-tab-content" class="tab-content space-y-4 md:space-y-4">
                    <div class="flex items-center justify-between">
                        <h2 class="text-lg font-bold text-slate-300" data-translate-key="objectImage"></h2>
                    </div>
                    
                    <!-- Object Image Upload -->
                    <label for="image-upload" id="drop-zone" class="group relative flex flex-col items-center justify-center w-full h-32 md:h-32 px-4 md:px-4 py-2 md:py-2 border-2 border-dashed border-[var(--border-color)] cursor-pointer transition-colors">
                        <div id="drop-zone-prompt" class="flex flex-col items-center justify-center pointer-events-none w-full h-full">
                           <svg class="w-8 h-8 text-[var(--text-muted)] group-hover:text-[var(--accent-color)] transition-colors flex-shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M21 15V18H24V20H21V23H19V20H16V18H19V15H21ZM21.0082 3C21.556 3 22 3.44495 22 3.9934V13H20V5H4V18.999L14 9L17 12V14.829L14 11.8284L6.827 19H14V21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082ZM8 7C9.10457 7 10 7.89543 10 9C10 10.1046 9.10457 11 8 11C6.89543 11 6 10.1046 6 9C6 7.89543 6.89543 7 8 7Z"></path></svg>
                           <p class="text-sm text-[var(--text-muted)] group-hover:text-[var(--accent-color)] transition-colors text-center mt-2 leading-tight" data-translate-key="dropImagePrompt"></p>
                        </div>
                        <div id="drop-zone-filename" class="hidden text-center pointer-events-none p-2">
                           <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="w-10 h-10 mx-auto mb-2 text-green-500"><path d="M7 3C6.44772 3 6 3.44772 6 4V7H3C2.44772 7 2 7.44772 2 8V20C2 20.5523 2.44772 21 3 21H17C17.5523 21 18 20.5523 18 20V17H21C21.5523 17 22 16.5523 22 16V4C22 3.44772 21.5523 3 21 3H7ZM17 7H8V5H20V15H18V8C18 7.44772 17.5523 7 17 7ZM16 9V15.7394L11.4911 11.6404L4 18.6321V9H16ZM11.5089 14.3596L16 18.4424V19H6.53702L11.5089 14.3596ZM7 13.5C7.82843 13.5 8.5 12.8284 8.5 12C8.5 11.1716 7.82843 10.5 7 10.5C6.17157 10.5 5.5 11.1716 5.5 12C5.5 12.8284 6.17157 13.5 7 13.5Z"></path></svg>
                           <p class="text-sm font-semibold text-slate-300 break-all"></p>
                        </div>
                        <button id="delete-image-btn" class="drop-zone-delete-btn hidden">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M7 4V2H17V4H22V6H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V6H2V4H7ZM6 6V20H18V6H6ZM9 9H11V17H9V9ZM13 9H15V17H13V9Z"></path></svg>
                        </button>
                    </label>
                    <input type="file" id="image-upload" class="hidden" accept="image/png, image/jpeg, image/webp, image/svg+xml">
                    <!-- Controls that are only enabled when an object image is loaded -->
                    <div id="image-specific-controls" class="is-disabled space-y-4 md:space-y-4">
                        <!-- Transform Accordion -->
                        <div class="accordion-section border border-[var(--border-color)]" id="foreground-transform-accordion">
                            <div class="accordion-header w-full flex items-center justify-between p-4 md:p-4 transition-colors duration-200 cursor-pointer">
                                <div class="flex items-center gap-3 md:gap-3">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="accordion-chevron transition-transform duration-300 text-[var(--text-muted)]"><path d="m6 9 6 6 6-6"/></svg>
                                    <h2 class="text-base font-semibold text-slate-300" data-translate-key="transform"></h2>
                                </div>
                                <button class="reset-section-btn" data-section-key="image" data-translate-key-title="resetTransformTitle">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M22 12C22 17.5228 17.5229 22 12 22C6.4772 22 2 17.5228 2 12C2 6.47715 6.4772 2 12 2V4C7.5817 4 4 7.58172 4 12C4 16.4183 7.5817 20 12 20C16.4183 20 20 16.4183 20 12C20 9.25022 18.6127 6.82447 16.4998 5.38451L16.5 8H14.5V2L20.5 2V4L18.0008 3.99989C20.4293 5.82434 22 8.72873 22 12Z"></path></svg>
                                </button>
                            </div>
                            <div class="accordion-body space-y-4 md:space-y-4 p-4 md:p-4 border-t border-[var(--border-color)]">
                                <div>
                                    <label class="text-sm font-medium text-[var(--text-muted)] mb-2 block" data-translate-key="imageSize"></label>
                                    <div class="flex items-center gap-3 md:gap-3"><input type="range" id="image-size" min="10" max="200" value="80" class="w-full slider"><input type="number" id="image-size-input" min="10" max="200" value="80" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm focus:ring-[var(--accent-color)] focus:border-[var(--accent-color)]"></div>
                                </div>
                                <div>
                                    <label class="text-sm font-medium text-[var(--text-muted)] mb-2 block" data-translate-key="offsetX"></label>
                                    <div class="flex items-center gap-3 md:gap-3"><input type="range" id="image-offset-x" min="-150" max="150" value="0" class="w-full slider"><input type="number" id="image-offset-x-input" min="-150" max="150" value="0" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm focus:ring-[var(--accent-color)] focus:border-[var(--accent-color)]"></div>
                                </div>
                                 <div>
                                    <label class="text-sm font-medium text-[var(--text-muted)] mb-2 block" data-translate-key="offsetY"></label>
                                    <div class="flex items-center gap-3 md:gap-3"><input type="range" id="image-offset-y" min="-150" max="150" value="0" class="w-full slider"><input type="number" id="image-offset-y-input" min="-150" max="150" value="0" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm focus:ring-[var(--accent-color)] focus:border-[var(--accent-color)]"></div>
                                </div>
                                <div>
                                    <label id="image-rotation-label" class="text-sm font-medium text-[var(--text-muted)] mb-2 block" data-translate-key="rotation">Rotasi</label>
                                    <div class="flex items-center gap-3 md:gap-3">
                                        <input type="range" id="image-rotation" min="-180" max="180" value="0" step="1" class="w-full slider">
                                        <input type="number" id="image-rotation-input" value="0" step="1" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm">
                                    </div>
                                </div>                                
                            </div>
                        </div>
                        <!-- Torn Edges (Stroke) Accordion -->
                        <div class="accordion-section border border-[var(--border-color)]" id="foreground-stroke-accordion">
                            <div class="accordion-header w-full flex items-center justify-between p-4 md:p-4 transition-colors duration-200 cursor-pointer">
                                <div class="flex items-center gap-3 md:gap-3">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="accordion-chevron transition-transform duration-300 text-[var(--text-muted)]"><path d="m6 9 6 6 6-6"/></svg>
                                    <h2 class="text-base font-semibold text-slate-300" data-translate-key="tornEdges"></h2>
                                </div>
                                <div class="flex items-center">
                                    <button class="reset-section-btn" data-section-key="stroke" data-translate-key-title="resetTornEdgesTitle">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M22 12C22 17.5228 17.5229 22 12 22C6.4772 22 2 17.5228 2 12C2 6.47715 6.4772 2 12 2V4C7.5817 4 4 7.58172 4 12C4 16.4183 7.5817 20 12 20C16.4183 20 20 16.4183 20 12C20 9.25022 18.6127 6.82447 16.4998 5.38451L16.5 8H14.5V2L20.5 2V4L18.0008 3.99989C20.4293 5.82434 22 8.72873 22 12Z"></path></svg>
                                    </button>
                                    <label class="switch"><input type="checkbox" id="stroke-enabled-switch" checked><span class="toggle-slider"></span></label>
                                </div>
                            </div>
                            <div class="accordion-body space-y-4 md:space-y-4 p-4 md:p-4 border-t border-[var(--border-color)]">
                                <div>
                                    <label class="text-sm font-medium text-[var(--text-muted)] mb-2 block" data-translate-key="thickness"></label>
                                    <div class="flex items-center gap-3 md:gap-3"><input type="range" id="stroke-width" min="0" max="100" value="10" class="w-full slider"><input type="number" id="stroke-width-input" min="0" max="50" value="10" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm"></div>
                                </div>
                                <div>
                                    <label class="text-sm font-medium text-[var(--text-muted)] mb-2 block" data-translate-key="roughness"></label>
                                    <div class="flex items-center gap-3 md:gap-3"><input type="range" id="stroke-roughness" min="0" max="100" value="25" class="w-full slider"><input type="number" id="stroke-roughness-input" min="0" max="100" value="25" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm"></div>
                                </div>
                                <div>
                                    <label class="text-sm font-medium text-[var(--text-muted)] mb-2 block" data-translate-key="detail"></label>
                                    <div class="flex items-center gap-3 md:gap-3"><input type="range" id="stroke-detail" min="1" max="100" step="1" value="20" class="w-full slider"><input type="number" id="stroke-detail-input" min="1" max="100" step="1" value="20" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm"></div>
                                </div>
                            </div>
                        </div>
                        <!-- Paper Texture Accordion -->
                        <div class="accordion-section border border-[var(--border-color)]" id="paper-fold-overlay-accordion">
                            <div class="accordion-header w-full flex items-center justify-between p-4 md:p-4 transition-colors duration-200 cursor-pointer">
                                <div class="flex items-center gap-3 md:gap-3">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="accordion-chevron transition-transform duration-300 text-[var(--text-muted)]"><path d="m6 9 6 6 6-6"/></svg>
                                    <h2 class="text-base font-semibold text-slate-300" data-translate-key="paperTexture"></h2>
                                </div>
                                <div class="flex items-center">
                                    <button class="reset-section-btn" data-section-key="paperFoldOverlay" data-translate-key-title="resetPaperTextureTitle">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M22 12C22 17.5228 17.5229 22 12 22C6.4772 22 2 17.5228 2 12C2 6.47715 6.4772 2 12 2V4C7.5817 4 4 7.58172 4 12C4 16.4183 7.5817 20 12 20C16.4183 20 20 16.4183 20 12C20 9.25022 18.6127 6.82447 16.4998 5.38451L16.5 8H14.5V2L20.5 2V4L18.0008 3.99989C20.4293 5.82434 22 8.72873 22 12Z"></path></svg>
                                    </button>
                                    <label class="switch"><input type="checkbox" id="paper-fold-overlay-enabled-switch"><span class="toggle-slider"></span></label>
                                </div>
                            </div>
                            <div class="accordion-body space-y-4 md:space-y-4 p-4 md:p-4 border-t border-[var(--border-color)]">
                                <div id="overlay-controls" class="controls-disabled-for-overlay space-y-4">
                                    <div>
                                        <label class="text-sm font-medium text-[var(--text-muted)] mb-2 block" data-translate-key="opacity"></label>
                                        <div class="flex items-center gap-3 md:gap-3"><input type="range" id="overlay-opacity" min="0" max="100" value="100" class="w-full slider"><input type="number" id="overlay-opacity-input" min="0" max="100" value="100" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm"></div>
                                    </div>
                                    <div>
                                        <label class="text-sm font-medium text-[var(--text-muted)] mb-2 block" data-translate-key="speedFps"></label>
                                        <div class="flex items-center gap-3 md:gap-3"><input type="range" id="overlay-speed" min="0" max="15" value="4" step="0.5" class="w-full slider"><input type="number" id="overlay-speed-input" min="0" max="15" value="4" step="0.5" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Drop Shadow Accordion -->
                        <div class="accordion-section border border-[var(--border-color)]" id="foreground-shadow-accordion">
                            <div class="accordion-header w-full flex items-center justify-between p-4 md:p-4 transition-colors duration-200 cursor-pointer">
                                <div class="flex items-center gap-3 md:gap-3">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="accordion-chevron transition-transform duration-300 text-[var(--text-muted)]"><path d="m6 9 6 6 6-6"/></svg>
                                    <h2 class="text-base font-semibold text-slate-300" data-translate-key="dropShadow"></h2>
                                    <div class="relative info-tooltip-trigger">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="text-[var(--text-muted)] cursor-pointer" width="16" height="16"><path d="M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM11 7H13V9H11V7ZM11 11H13V17H11V11Z"></path></svg>
                                        <div class="info-tooltip absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-max max-w-xs bg-slate-900/95 p-3 text-xs text-slate-200 border border-[var(--border-color)] shadow-lg z-10 pointer-events-none">
                                            <p data-translate-key="dropShadowTooltip"></p>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex items-center">
                                    <button class="reset-section-btn" data-section-key="shadow" data-translate-key-title="resetDropShadowTitle">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M22 12C22 17.5228 17.5229 22 12 22C6.4772 22 2 17.5228 2 12C2 6.47715 6.4772 2 12 2V4C7.5817 4 4 7.58172 4 12C4 16.4183 7.5817 20 12 20C16.4183 20 20 16.4183 20 12C20 9.25022 18.6127 6.82447 16.4998 5.38451L16.5 8H14.5V2L20.5 2V4L18.0008 3.99989C20.4293 5.82434 22 8.72873 22 12Z"></path></svg>
                                    </button>
                                    <label class="switch"><input type="checkbox" id="shadow-enabled-switch" checked><span class="toggle-slider"></span></label>
                                </div>
                            </div>
                            <div class="accordion-body space-y-4 md:space-y-4 p-4 md:p-4 border-t border-[var(--border-color)]">
                                <div class="flex items-center justify-between flex-wrap gap-2">
                                    <label class="text-sm font-medium text-[var(--text-muted)]" data-translate-key="offset"></label>
                                    <div class="flex items-center gap-2 md:gap-2"><label for="shadow-offset-x-input" class="text-sm text-[var(--text-muted)]">X:</label><input type="number" id="shadow-offset-x-input" min="-100" max="100" value="5" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm"><label for="shadow-offset-y-input" class="text-sm text-[var(--text-muted)] ml-1">Y:</label><input type="number" id="shadow-offset-y-input" min="-100" max="100" value="5" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm"></div>
                                </div>
                                <div>
                                    <label class="text-sm font-medium text-[var(--text-muted)] mb-2 block" data-translate-key="blur"></label>
                                    <div class="flex items-center gap-3 md:gap-3"><input type="range" id="shadow-blur" min="0" max="50" value="5" class="w-full slider"><input type="number" id="shadow-blur-input" min="0" max="50" value="5" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm"></div>
                                </div>
                                <div>
                                    <label class="text-sm font-medium text-[var(--text-muted)] mb-2 block" data-translate-key="opacity"></label>
                                    <div class="flex items-center gap-3 md:gap-3"><input type="range" id="shadow-opacity" min="0" max="100" value="50" step="1" class="w-full slider"><input type="number" id="shadow-opacity-input" min="0" max="100" value="50" step="1" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm"></div>
                                </div>
                                <div>
                                    <label for="shadow-color" class="text-sm font-medium text-[var(--text-muted)]" data-translate-key="color"></label>
                                    <input type="color" id="shadow-color" value="#000000" class="w-full h-10 mt-2 p-1 bg-slate-900 border border-[var(--border-color)] cursor-pointer">
                                </div>
                            </div>
                        </div>
                        <!-- Movement Accordion -->
                        <div class="accordion-section border border-[var(--border-color)]" id="movement-accordion">
                            <div class="accordion-header w-full flex items-center justify-between p-4 md:p-4 transition-colors duration-200 cursor-pointer">
                                <div class="flex items-center gap-3 md:gap-3">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="accordion-chevron transition-transform duration-300 text-[var(--text-muted)]"><path d="m6 9 6 6 6-6"/></svg>
                                    <h2 class="text-base font-semibold text-slate-300" data-translate-key="movement"></h2>
                                </div>
                                <div class="flex items-center">
                                    <button class="reset-section-btn" data-section-key="movement" data-translate-key-title="resetMovementTitle">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M22 12C22 17.5228 17.5229 22 12 22C6.4772 22 2 17.5228 2 12C2 6.47715 6.4772 2 12 2V4C7.5817 4 4 7.58172 4 12C4 16.4183 7.5817 20 12 20C16.4183 20 20 16.4183 20 12C20 9.25022 18.6127 6.82447 16.4998 5.38451L16.5 8H14.5V2L20.5 2V4L18.0008 3.99989C20.4293 5.82434 22 8.72873 22 12Z"></path></svg>
                                    </button>
                                    <label class="switch"><input type="checkbox" id="movement-enabled-switch" checked><span class="toggle-slider"></span></label>
                                </div>
                            </div>
                            <div class="accordion-body space-y-4 md:space-y-4 p-4 md:p-4 border-t border-[var(--border-color)]">
                                <div id="movement-mode-controls">
                                    <label class="text-sm font-medium text-[var(--text-muted)]" data-translate-key="controlMode"></label>
                                    <div id="movement-mode-btns" class="grid grid-cols-2 gap-2 md:gap-2 mt-2 btn-group-toggle">
                                        <button data-mode="simpel" class="p-2.5 px-2 py-1.5 border-2 border-[var(--border-color)] text-[var(--text-muted)] text-sm font-medium transition-all duration-150 active" data-translate-key="simple"></button>
                                        <button data-mode="lengkap" class="p-2.5 px-2 py-1.5 border-2 border-[var(--border-color)] text-[var(--text-muted)] text-sm font-medium transition-all duration-150" data-translate-key="advanced"></button>
                                    </div>
                                </div>
                                <div id="movement-controls-simpel" class="space-y-4 md:space-y-4 mt-4">
                                        <div>
                                            <label class="text-sm font-medium text-[var(--text-muted)] mb-2 block" data-translate-key="speed"></label>
                                            <div class="flex items-center gap-3 md:gap-3"><input type="range" id="movement-simpel-speed" min="0" max="15" value="1" step="0.5" class="w-full slider"><input type="number" id="movement-simpel-speed-input" min="0" max="15" value="1" step="0.5" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm"></div>
                                        </div>
                                        <div>
                                            <label class="text-sm font-medium text-[var(--text-muted)] mb-2 block" data-translate-key="strength"></label>
                                            <div class="flex items-center gap-3 md:gap-3"><input type="range" id="movement-simpel-strength" min="0" max="10" value="1" step="0.25" class="w-full slider"><input type="number" id="movement-simpel-strength-input" min="0" max="10" value="1" step="0.25" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm"></div>
                                        </div>
                                </div>
                                <div id="movement-controls-lengkap" class="hidden space-y-4 md:space-y-4 mt-4">
                                    <div>
                                        <label class="text-sm font-medium text-[var(--text-muted)] mb-2 block" data-translate-key="rotationSpeed"></label>
                                        <div class="flex items-center gap-3 md:gap-3"><input type="range" id="movement-rotation-speed" min="0" max="15" value="3" step="0.5" class="w-full slider"><input type="number" id="movement-rotation-speed-input" min="0" max="15" value="3" step="0.5" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm"></div>
                                    </div>
                                    <div>
                                        <label class="text-sm font-medium text-[var(--text-muted)] mb-2 block" data-translate-key="rotationStrength"></label>
                                        <div class="flex items-center gap-3 md:gap-3"><input type="range" id="movement-rotation-strength" min="0" max="10" value="1" step="0.25" class="w-full slider"><input type="number" id="movement-rotation-strength-input" min="0" max="10" value="1" step="0.25" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm"></div>
                                    </div>
                                    <div>
                                        <label class="text-sm font-medium text-[var(--text-muted)] mb-2 block" data-translate-key="positionSpeedX"></label>
                                        <div class="flex items-center gap-3 md:gap-3"><input type="range" id="movement-position-speed-x" min="0" max="15" value="2" step="0.5" class="w-full slider"><input type="number" id="movement-position-speed-x-input" min="0" max="15" value="2" step="0.5" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm"></div>
                                    </div>
                                    <div>
                                        <label class="text-sm font-medium text-[var(--text-muted)] mb-2 block" data-translate-key="positionSpeedY"></label>
                                        <div class="flex items-center gap-3 md:gap-3"><input type="range" id="movement-position-speed-y" min="0" max="15" value="4" step="0.5" class="w-full slider"><input type="number" id="movement-position-speed-y-input" min="0" max="15" value="4" step="0.5" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm"></div>
                                    </div>
                                    <div>
                                        <label class="text-sm font-medium text-[var(--text-muted)] mb-2 block" data-translate-key="positionStrengthX"></label>
                                        <div class="flex items-center gap-3 md:gap-3"><input type="range" id="movement-position-strength-x" min="0" max="50" value="1" class="w-full slider"><input type="number" id="movement-position-strength-x-input" min="0" max="50" value="1" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm"></div>
                                    </div>
                                    <div>
                                        <label class="text-sm font-medium text-[var(--text-muted)] mb-2 block" data-translate-key="positionStrengthY"></label>
                                        <div class="flex items-center gap-3 md:gap-3"><input type="range" id="movement-position-strength-y" min="0" max="50" value="5" class="w-full slider"><input type="number" id="movement-position-strength-y-input" min="0" max="50" value="5" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Color Correction Accordion -->
                        <div class="accordion-section border border-[var(--border-color)]" id="foreground-color-accordion">
                            <div class="accordion-header w-full flex items-center justify-between p-4 md:p-4 transition-colors duration-200 cursor-pointer">
                               <div class="flex items-center gap-3 md:gap-3">
                                   <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="accordion-chevron transition-transform duration-300 text-[var(--text-muted)]"><path d="m6 9 6 6 6-6"/></svg>
                                   <h2 class="text-base font-semibold text-slate-300" data-translate-key="colorCorrection"></h2>
                               </div>
                                <div class="flex items-center">
                                    <button class="reset-section-btn" data-section-key="color" data-translate-key-title="resetColorCorrectionTitle">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M22 12C22 17.5228 17.5229 22 12 22C6.4772 22 2 17.5228 2 12C2 6.47715 6.4772 2 12 2V4C7.5817 4 4 7.58172 4 12C4 16.4183 7.5817 20 12 20C16.4183 20 20 16.4183 20 12C20 9.25022 18.6127 6.82447 16.4998 5.38451L16.5 8H14.5V2L20.5 2V4L18.0008 3.99989C20.4293 5.82434 22 8.72873 22 12Z"></path></svg>
                                    </button>
                                    <label class="switch"><input type="checkbox" id="color-enabled-switch"><span class="toggle-slider"></span></label>
                                </div>
                            </div>
                            <div class="accordion-body space-y-4 md:space-y-4 p-4 md:p-4 border-t border-[var(--border-color)] hidden">
                                <div>
                                    <label class="text-sm font-medium text-[var(--text-muted)] mb-2 block" data-translate-key="hue"></label>
                                    <div class="flex items-center gap-3 md:gap-3"><input type="range" id="color-hue" min="-180" max="180" value="0" class="w-full slider"><input type="number" id="color-hue-input" min="-180" max="180" value="0" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm"></div>
                                </div>
                                <div id="color-correction-standard-controls" class="space-y-4">
                                    <div>
                                        <label class="text-sm font-medium text-[var(--text-muted)] mb-2 block" data-translate-key="saturation"></label>
                                        <div class="flex items-center gap-3 md:gap-3"><input type="range" id="color-saturation" min="-100" max="100" value="0" class="w-full slider"><input type="number" id="color-saturation-input" min="-100" max="100" value="0" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm"></div>
                                    </div>
                                    <div>
                                        <label class="text-sm font-medium text-[var(--text-muted)] mb-2 block" data-translate-key="brightness"></label>
                                        <div class="flex items-center gap-3 md:gap-3"><input type="range" id="color-brightness" min="-100" max="100" value="0" class="w-full slider"><input type="number" id="color-brightness-input" min="-100" max="100" value="0" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm"></div>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2 pt-2 border-t border-slate-700">
                                    <input type="checkbox" id="colorize-switch" class="h-4 w-4 bg-slate-600 border-slate-500 text-[var(--accent-color)] focus:ring-[var(--accent-color)]">
                                    <label for="colorize-switch" class="text-sm text-slate-300" data-translate-key="colorize"></label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="space-y-4 md:space-y-4 pt-4 border-t border-[var(--border-color)] mt-4">
                        <button id="reset-settings-btn-object" class="reset-all-btn flex items-center justify-center gap-2 md:gap-2 w-full px-5 py-3 bg-[var(--danger-color)] text-white text-sm font-semibold hover:bg-[var(--danger-color-hover)] transition-all duration-150 cursor-pointer" data-translate-key="resetAll"></button>
                    </div>                    
                </div>

                <div id="animasi-tab-content" class="tab-content hidden space-y-4 md:space-y-4">
                    <div class="space-y-4 md:space-y-4">
                        <h2 class="text-lg font-bold text-slate-300" data-translate-key="animationObject"></h2>
                        <div id="animation-timeline" class="space-y-2 pt-4 border-t border-slate-700">
                            <div class="flex items-center justify-between">
                                <label for="timeline-slider" class="text-sm font-medium text-[var(--text-muted)]" data-translate-key="timeline"></label>
                                <div class="flex items-center gap-2">
                                    <span id="timeline-current-time" class="text-sm text-slate-300 font-mono">0.00s</span>
                                    <span class="text-sm text-slate-500">/</span>
                                    <input type="number" id="timeline-duration-input" min="1" max="300" step="0.1" value="5.0" class="number-input-uniform bg-slate-900 border border-[var(--border-color)] py-1 px-2 text-sm">
                                </div>
                            </div>
                            <div class="flex items-center gap-3">
                                <button id="play-pause-btn" class="p-1.5 text-slate-300 hover:text-white bg-slate-700 hover:bg-slate-600 transition-colors">
                                    <svg id="pause-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                        <path d="M6 3.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V4a.5.5 0 0 1 .5-.5zm4 0a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V4a.5.5 0 0 1 .5-.5z"/>
                                    </svg>
                                    <svg id="play-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="hidden" viewBox="0 0 16 16">
                                        <path d="M11.596 8.697l-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"/>
                                    </svg>
                                </button>                                
                                <div class="relative w-full h-5 flex items-center timeline-wrapper">
                                    <input type="range" id="timeline-slider" min="0" max="5" step="0.01" value="0" class="slider">
                                    <div id="keyframe-markers-container" class="absolute w-full h-full pointer-events-none"></div>
                                </div>
                            </div>
                        </div>
                        <div>
                            <label class="text-sm font-medium text-[var(--text-muted)]" data-translate-key="controlMode"></label>
                            <div id="animation-mode-btns" class="grid grid-cols-2 gap-2 md:gap-2 mt-2 btn-group-toggle">
                                <button data-mode="simple" class="p-2.5 px-2 py-1.5 border-2 border-[var(--border-color)] text-[var(--text-muted)] text-sm font-medium transition-all duration-150" data-translate-key="simple"></button>
                                <button data-mode="advanced" class="p-2.5 px-2 py-1.5 border-2 border-[var(--border-color)] text-[var(--text-muted)] text-sm font-medium transition-all duration-150" data-translate-key="advanced"></button>
                            </div>
                        </div>
                        <div id="animation-simple-controls" class="space-y-4 pt-4 border-t border-slate-700">
                            <div class="flex items-center justify-between">
                                <span class="text-sm font-medium text-slate-300" data-translate-key="openAnim">Animasi Kertas Terbuka</span>
                                <label class="switch">
                                    <input type="checkbox" id="simple-anim-open-switch">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm font-medium text-slate-300" data-translate-key="closeAnim">Animasi Kertas Tertutup</span>
                                <label class="switch">
                                    <input type="checkbox" id="simple-anim-close-switch">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                        <div id="animation-advanced-controls" class="hidden">
                            <div class="space-y-4 pt-4 border-t border-slate-700">
                                <div class="flex justify-end">
                                    <button id="add-keyframe-btn" class="flex items-center gap-2 px-4 py-2 bg-[var(--accent-color)] text-white text-sm font-semibold hover:bg-[var(--accent-color-hover)] transition-all duration-150 cursor-pointer">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-lg" viewBox="0 0 16 16">
                                        <path fill-rule="evenodd" d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2z"/>
                                        </svg>
                                        <span data-translate-key="addKeyframe">Tambah Keyframe</span>
                                    </button>
                                </div>
                        
                                <div id="keyframe-list" class="space-y-2"></div>
                        
                                <div id="keyframe-properties-panel" class="hidden"></div>
                            </div>
                        </div>
                    </div>
                    <div class="space-y-4 md:space-y-4 pt-4 border-t border-[var(--border-color)] mt-4">
                        <button id="reset-settings-btn-animasi" class="reset-all-btn flex items-center justify-center gap-2 md:gap-2 w-full px-5 py-3 bg-[var(--danger-color)] text-white text-sm font-semibold hover:bg-[var(--danger-color-hover)] transition-all duration-150 cursor-pointer" data-translate-key="resetAll"></button>
                    </div>                    
                </div>

                <!-- Info/Settings Tab Content -->            
                <div id="info-tab-content" class="tab-content hidden space-y-4 md:space-y-4 text-slate-300">
                    <div class="space-y-4">
                        <div class="space-y-2 md:space-y-2">
                            <h2 class="text-lg font-bold text-slate-300" data-translate-key="language"></h2>
                            <div id="language-btns" class="grid grid-cols-2 gap-2 md:gap-2 mt-2 btn-group-toggle">
                                <button data-lang="en" class="p-2.5 px-2 py-1.5 border-2 border-[var(--border-color)] text-[var(--text-muted)] text-sm font-medium transition-all duration-150">English</button>
                                <button data-lang="id" class="p-2.5 px-2 py-1.5 border-2 border-[var(--border-color)] text-[var(--text-muted)] text-sm font-medium transition-all duration-150">Indonesia</button>
                            </div>
                        </div>
                        <div class="space-y-2 md:space-y-2 pt-4 border-t border-[var(--border-color)]">
                            <h2 class="text-lg font-bold text-slate-300" data-translate-key="displayMode"></h2>
                            <div id="display-mode-btns" class="flex flex-col gap-2 mt-2 btn-group-toggle">
                                <button data-mode="auto" class="w-full p-2.5 px-2 py-1.5 border-2 border-[var(--border-color)] text-[var(--text-muted)] text-sm font-medium transition-all duration-150" data-translate-key="auto"></button>
                                <button data-mode="mobile" class="w-full p-2.5 px-2 py-1.5 border-2 border-[var(--border-color)] text-[var(--text-muted)] text-sm font-medium transition-all duration-150" data-translate-key="mobile"></button>
                                <button data-mode="desktop" class="w-full p-2.5 px-2 py-1.5 border-2 border-[var(--border-color)] text-[var(--text-muted)] text-sm font-medium transition-all duration-150" data-translate-key="desktop"></button>
                            </div>
                            <p id="display-mode-warning" class="text-sm text-red-400 mt-2 hidden" data-translate-key="displayModeWarning"></p>
                        </div>
                        <div class="space-y-2 md:space-y-2 pt-4 border-t border-[var(--border-color)]">
                            <h2 class="text-lg font-bold text-slate-300" data-translate-key="uiSize"></h2>
                            <div id="ui-size-btns" class="grid grid-cols-3 gap-2 md:gap-2 mt-2 btn-group-toggle">
                                <button data-size="compact" class="p-2.5 px-2 py-1.5 border-2 border-[var(--border-color)] text-[var(--text-muted)] text-sm font-medium transition-all duration-150" data-translate-key="compact"></button>
                                <button data-size="normal" class="p-2.5 px-2 py-1.5 border-2 border-[var(--border-color)] text-[var(--text-muted)] text-sm font-medium transition-all duration-150" data-translate-key="normal"></button>
                                <button data-size="wide" class="p-2.5 px-2 py-1.5 border-2 border-[var(--border-color)] text-[var(--text-muted)] text-sm font-medium transition-all duration-150" data-translate-key="spacious"></button>
                            </div>
                        </div>
                        <div class="space-y-2 md:space-y-2 pt-4 border-t border-[var(--border-color)]">
                            <h2 for="accent-color-picker" class="text-lg font-bold text-slate-300" data-translate-key="accentColor"></h2>
                            <input type="color" id="accent-color-picker" class="w-full h-10 mt-2 p-1 bg-slate-900 border border-[var(--border-color)] cursor-pointer">
                        </div>
                        <div class="space-y-2 md:space-y-2 pt-4 border-t border-[var(--border-color)]">
                            <div class="flex items-center gap-2">
                                <h2 class="text-lg font-bold text-slate-300" data-translate-key="previewResolution"></h2>
                                <div class="relative info-tooltip-trigger">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="text-[var(--text-muted)] cursor-pointer" width="16" height="16"><path d="M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM11 7H13V9H11V7ZM11 11H13V17H11V11Z"></path></svg>
                                    <div class="info-tooltip absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-max max-w-xs bg-slate-900/95 p-3 text-xs text-slate-200 border border-[var(--border-color)] shadow-lg z-10 pointer-events-none">
                                        <p data-translate-key="previewResolutionWarning"></p>
                                    </div>
                                </div>
                            </div>
                            <div id="preview-resolution-btns" class="grid grid-cols-3 gap-2 md:gap-2 mt-2 btn-group-toggle">
                                <button data-res="360" class="p-2.5 px-2 py-1.5 border-2 border-[var(--border-color)] text-[var(--text-muted)] text-sm font-medium">360p</button>
                                <button data-res="540" class="p-2.5 px-2 py-1.5 border-2 border-[var(--border-color)] text-[var(--text-muted)] text-sm font-medium">540p</button>
                                <button data-res="720" class="p-2.5 px-2 py-1.5 border-2 border-[var(--border-color)] text-[var(--text-muted)] text-sm font-medium">720p</button>
                            </div>
                        <div class="pt-4 border-t border-[var(--border-color)] flex items-center justify-between">
                            <label for="debug-screen-switch" class="text-sm font-medium text-slate-300" data-translate-key="debugScreen"></label>
                            <label class="switch">
                                <input type="checkbox" id="debug-screen-switch">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    <div class="space-y-2 md:space-y-2 pt-4 border-t border-[var(--border-color)]">
                        <h2 class="text-lg font-bold text-slate-300" data-translate-key="appInfo"></h2>
                        <p class="text-sm" data-translate-key="appDescription"></p>
                        <p class="text-sm pt-2" data-translate-key="appDescription2"></p>
                    </div>
                    <div class="space-y-2 md:space-y-2 pt-4 border-t border-[var(--border-color)]">
                        <div class="grid grid-cols-2 gap-2 md:gap-2 mt-2">
                            <button id="pwa-install-button" class="flex items-center justify-center gap-2 px-4 py-2 bg-slate-600/50 text-white text-sm font-semibold text-center hover:bg-slate-500/50 transition-all duration-150 cursor-pointer">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M2.5 7C2.5 9.48528 4.51472 11.5 7 11.5C9.48528 11.5 11.5 9.48528 11.5 7C11.5 4.51472 9.48528 2.5 7 2.5C4.51472 2.5 2.5 4.51472 2.5 7ZM2.5 17C2.5 19.4853 4.51472 21.5 7 21.5C9.48528 21.5 11.5 19.4853 11.5 17C11.5 14.5147 9.48528 12.5 7 12.5C4.51472 12.5 2.5 14.5147 2.5 17ZM12.5 17C12.5 19.4853 14.5147 21.5 17 21.5C19.4853 21.5 21.5 19.4853 21.5 17C21.5 14.5147 19.4853 12.5 17 12.5C14.5147 12.5 12.5 14.5147 12.5 17ZM16 11V8H13V6H16V3H18V6H21V8H18V11H16Z"></path></svg>
                                <span data-translate-key="installApp">Install App</span>
                            </button>
                            <a id="info-link" href="https://dayverse.id/en/docs/?q=paperima" target="_blank" class="flex items-center justify-center gap-2 px-4 py-2 bg-slate-600/50 text-white text-sm font-semibold text-center hover:bg-slate-500/50 transition-all duration-150 cursor-pointer">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M20 22H6.5C4.567 22 3 20.433 3 18.5V5C3 3.34315 4.34315 2 6 2H20C20.5523 2 21 2.44772 21 3V21C21 21.5523 20.5523 22 20 22ZM19 20V17H6.5C5.67157 17 5 17.6716 5 18.5C5 19.3284 5.67157 20 6.5 20H19ZM10 4V12L13.5 10L17 12V4H10Z"></path></svg>
                                <span data-translate-key="Info">Tutorial</span>
                            </a>
                            <a href="https://github.com/nurimator/paperima" target="_blank" class="flex items-center justify-center gap-2 px-4 py-2 bg-slate-600/50 text-white text-sm font-semibold text-center hover:bg-slate-500/50 transition-all duration-150 cursor-pointer">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M12.001 2C6.47598 2 2.00098 6.475 2.00098 12C2.00098 16.425 4.86348 20.1625 8.83848 21.4875C9.33848 21.575 9.52598 21.275 9.52598 21.0125C9.52598 20.775 9.51348 19.9875 9.51348 19.15C7.00098 19.6125 6.35098 18.5375 6.15098 17.975C6.03848 17.6875 5.55098 16.8 5.12598 16.5625C4.77598 16.375 4.27598 15.9125 5.11348 15.9C5.90098 15.8875 6.46348 16.625 6.65098 16.925C7.55098 18.4375 8.98848 18.0125 9.56348 17.75C9.65098 17.1 9.91348 16.6625 10.201 16.4125C7.97598 16.1625 5.65098 15.3 5.65098 11.475C5.65098 10.3875 6.03848 9.4875 6.67598 8.7875C6.57598 8.5375 6.22598 7.5125 6.77598 6.1375C6.77598 6.1375 7.61348 5.875 9.52598 7.1625C10.326 6.9375 11.176 6.825 12.026 6.825C12.876 6.825 13.726 6.9375 14.526 7.1625C16.4385 5.8625 17.276 6.1375 17.276 6.1375C17.826 7.5125 17.476 8.5375 17.376 8.7875C18.0135 9.4875 18.401 10.375 18.401 11.475C18.401 15.3125 16.0635 16.1625 13.8385 16.4125C14.201 16.725 14.5135 17.325 14.5135 18.2625C14.5135 19.6 14.501 20.675 14.501 21.0125C14.501 21.275 14.6885 21.5875 15.1885 21.4875C19.259 20.1133 21.9999 16.2963 22.001 12C22.001 6.475 17.526 2 12.001 2Z"></path></svg>
                                <span data-translate-key="sourceCode">Source Code</span>
                            </a>
                            <button id="license-btn" class="flex items-center justify-center gap-2 px-4 py-2 bg-slate-600/50 text-white text-sm font-semibold text-center hover:bg-slate-500/50 transition-all duration-150 cursor-pointer">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M21 9V20.9925C21 21.5511 20.5552 22 20.0066 22H3.9934C3.44495 22 3 21.556 3 21.0082V2.9918C3 2.45531 3.44694 2 3.99826 2H14V8C14 8.55228 14.4477 9 15 9H21ZM21 7H16V2.00318L21 7ZM8 7V9H11V7H8ZM8 11V13H16V11H8ZM8 15V17H16V15H8Z"></path></svg>
                                <span data-translate-key="license">License</span>
                            </button>
                        </div>
                        <div class="mt-2">
                            <a id="support-link" href="https://dayverse.id/en/donate" target="_blank" class="flex items-center justify-center gap-2 w-full px-4 py-2 bg-[var(--accent-color)] text-white text-sm font-semibold text-center hover:bg-[var(--accent-color-hover)] transition-all duration-150 cursor-pointer">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M12.001 4.52853C14.35 2.42 17.98 2.49 20.2426 4.75736C22.5053 7.02472 22.583 10.637 20.4786 12.993L11.9999 21.485L3.52138 12.993C1.41705 10.637 1.49571 7.01901 3.75736 4.75736C6.02157 2.49315 9.64519 2.41687 12.001 4.52853Z"></path></svg>
                                <span data-translate-key="supportCreator">Support Creator</span>
                            </a>
                        </div>
                    </div>
                    <div class="space-y-4 md:space-y-4 pt-4 border-t border-[var(--border-color)] mt-4">
                        <button id="reset-preferences-btn" class="flex items-center justify-center gap-2 md:gap-2 w-full px-5 py-3 bg-[var(--danger-color)] text-white text-sm font-semibold hover:bg-[var(--danger-color-hover)] transition-all duration-150 cursor-pointer" data-translate-key="resetPreferences"></button>
                    </div>                    
                </div>
            </div>
        </aside>
    </div>

    <!-- Mobile footer with tabs and export button -->
    <footer id="mobile-footer" class="fixed bottom-0 left-0 right-0 h-16 bg-[var(--bg-header)] border-t border-[var(--border-color)] z-50 flex justify-around items-center" style="display: var(--mobile-footer-display);">
        <button id="mobile-tab-object" data-tab="object" class="mobile-tab-btn p-2 text-slate-300 hover:text-white active" aria-label="Object">
            <svg class="w-7 h-7" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill=#ffffff><path d="M7 3C6.44772 3 6 3.44772 6 4V7H3C2.44772 7 2 7.44772 2 8V20C2 20.5523 2.44772 21 3 21H17C17.5523 21 18 20.5523 18 20V17H21C21.5523 17 22 16.5523 22 16V4C22 3.44772 21.5523 3 21 3H7ZM17 7H8V5H20V15H18V8C18 7.44772 17.5523 7 17 7ZM16 9V15.7394L11.4911 11.6404L4 18.6321V9H16ZM11.5089 14.3596L16 18.4424V19H6.53702L11.5089 14.3596ZM7 13.5C7.82843 13.5 8.5 12.8284 8.5 12C8.5 11.1716 7.82843 10.5 7 10.5C6.17157 10.5 5.5 11.1716 5.5 12C5.5 12.8284 6.17157 13.5 7 13.5Z"></path></svg>
        </button>
        <button id="mobile-tab-background" data-tab="background" class="mobile-tab-btn p-2 text-slate-300 hover:text-white" aria-label="Background">
            <svg class="w-7 h-7" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill=#ffffff><path d="M21 3C21.5523 3 22 3.44772 22 4V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V4C2 3.44772 2.44772 3 3 3H21ZM20 5H4V19H20V5ZM13 17V15H16V12H18V17H13ZM11 7V9H8V12H6V7H11Z"></path></svg>
        </button>
        <button id="mobile-tab-animasi" data-tab="animasi" class="mobile-tab-btn p-2 text-slate-300 hover:text-white" aria-label="Animation">
            <svg class="w-7 h-7" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill=#ffffff><path d="M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM4 5V19H20V5H4ZM10.6219 8.41459L15.5008 11.6672C15.6846 11.7897 15.7343 12.0381 15.6117 12.2219C15.5824 12.2658 15.5447 12.3035 15.5008 12.3328L10.6219 15.5854C10.4381 15.708 10.1897 15.6583 10.0672 15.4745C10.0234 15.4088 10 15.3316 10 15.2526V8.74741C10 8.52649 10.1791 8.34741 10.4 8.34741C10.479 8.34741 10.5562 8.37078 10.6219 8.41459Z"></path></svg>
        </button>
        <button id="mobile-tab-info" data-tab="info" class="mobile-tab-btn p-2 text-slate-300 hover:text-white" aria-label="Preferences">
            <svg class="w-7 h-7" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill=#ffffff><path d="M12 14V16C8.68629 16 6 18.6863 6 22H4C4 17.5817 7.58172 14 12 14ZM12 13C8.685 13 6 10.315 6 7C6 3.685 8.685 1 12 1C15.315 1 18 3.685 18 7C18 10.315 15.315 13 12 13ZM12 11C14.21 11 16 9.21 16 7C16 4.79 14.21 3 12 3C9.79 3 8 4.79 8 7C8 9.21 9.79 11 12 11ZM14.5946 18.8115C14.5327 18.5511 14.5 18.2794 14.5 18C14.5 17.7207 14.5327 17.449 14.5945 17.1886L13.6029 16.6161L14.6029 14.884L15.5952 15.4569C15.9883 15.0851 16.4676 14.8034 17 14.6449V13.5H19V14.6449C19.5324 14.8034 20.0116 15.0851 20.4047 15.4569L21.3971 14.8839L22.3972 16.616L21.4055 17.1885C21.4673 17.449 21.5 17.7207 21.5 18C21.5 18.2793 21.4673 18.551 21.4055 18.8114L22.3972 19.3839L21.3972 21.116L20.4048 20.543C20.0117 20.9149 19.5325 21.1966 19.0001 21.355V22.5H17.0001V21.3551C16.4677 21.1967 15.9884 20.915 15.5953 20.5431L14.603 21.1161L13.6029 19.384L14.5946 18.8115ZM18 19.5C18.8284 19.5 19.5 18.8284 19.5 18C19.5 17.1716 18.8284 16.5 18 16.5C17.1716 16.5 16.5 17.1716 16.5 18C16.5 18.8284 17.1716 19.5 18 19.5Z"></path></svg>
        </button>
        <button id="mobile-export-btn" class="px-5 py-2.5 bg-[var(--accent-color)] text-white text-sm font-semibold hover:bg-[var(--accent-color-hover)] transition-all duration-150 cursor-pointer" data-translate-key="export">Export
        </button>
    </footer>

    <!-- Top notification popup -->
    <div id="top-notification-popup" class="hidden">
        <p id="top-notification-message"></p>
        <button class="close-btn">&times;</button>
    </div>

    <!-- Export settings popup -->
    <div id="export-settings-popup" class="hidden popup-overlay flex items-center justify-center p-4">
        <div class="bg-slate-800 shadow-xl p-8 w-full max-w-sm text-left border border-[var(--border-color)]">
            <div class="space-y-4 md:space-y-4">
                <!-- Export Format Selection -->
                <div>
                    <label class="block text-sm font-medium text-[var(--text-muted)] mb-2" data-translate-key="exportFormat"></label>
                    <select id="export-format-select" class="w-full text-sm bg-slate-700 border border-[var(--border-color)] focus:ring-[var(--accent-color)] focus:border-[var(--accent-color)] text-slate-100" style="height: 46px; padding: 0.75rem 0.5rem; line-height: 1.25;">
                        <option value="webm" data-translate-key="videoWebm">Video (.webm)</option>
                        <option value="png" data-translate-key="imagePng">Image (.png)</option>
                        <option value="jpg" data-translate-key="imageJpg">Image (.jpg)</option>
                    </select>
                </div>
                
                <!-- Resolution Settings -->
                <div>
                    <label class="block text-sm font-medium text-[var(--text-muted)] mb-2" data-translate-key="canvasResolution"></label>
                    <div id="canvas-resolution-btns" class="grid grid-cols-3 gap-2 md:gap-2 btn-group-toggle">
                        <button data-res="720" class="px-2 py-1.5 text-sm border-2 border-[var(--border-color)] text-[var(--text-muted)]">720p</button>
                        <button data-res="1080" class="px-2 py-1.5 text-sm border-2 border-[var(--border-color)] text-[var(--text-muted)]">1080p</button>
                        <button data-res="1440" class="px-2 py-1.5 text-sm border-2 border-[var(--border-color)] text-[var(--text-muted)]">1440p</button>
                    </div>
                </div>
                
                <!-- Video-specific settings (FPS and Duration) -->
                <div id="video-settings">
                    <div class="grid grid-cols-2 gap-3 md:gap-3">
                        <div>
                            <label for="export-fps-select" class="block text-sm font-medium text-[var(--text-muted)] mb-2" data-translate-key="fps"></label>
                            <select id="export-fps-select" class="w-full text-sm bg-slate-700 border border-[var(--border-color)] focus:ring-[var(--accent-color)] focus:border-[var(--accent-color)] text-slate-100" style="height: 46px; padding: 0.75rem 0.5rem; line-height: 1.25;">
                                <option value="12">12</option>
                                <option value="24" selected>24</option>
                                <option value="30">30</option>
                                <option value="60">60</option>
                            </select>
                        </div>
                        <div>
                            <label for="export-duration-input" class="block text-sm font-medium text-[var(--text-muted)] mb-2" data-translate-key="duration"></label>
                            <input type="number" id="export-duration-input" value="5" min="1" max="60" class="w-full text-sm bg-slate-700 border border-[var(--border-color)] focus:ring-[var(--accent-color)] focus:border-[var(--accent-color)]" style="height: 46px; padding: 0.75rem 0.5rem; line-height: 1.25;">
                        </div>
                    </div>
                </div>
                
                <!-- PNG-specific settings (Transparent Background) -->
                <div id="png-settings" class="hidden">
                    <div class="flex items-center gap-3">
                        <label class="switch">
                            <input type="checkbox" id="transparent-background-checkbox" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <label for="transparent-background-checkbox" class="text-sm font-medium text-[var(--text-muted)]" data-translate-key="transparentBackground"></label>
                    </div>
                </div>
                
                <!-- JPG-specific settings (Quality) -->
                <div id="jpg-settings" class="hidden">
                    <div>
                        <label for="jpg-quality-slider" class="block text-sm font-medium text-[var(--text-muted)] mb-2" data-translate-key="imageQuality"></label>
                        <div class="flex items-center gap-3">
                            <input type="range" id="jpg-quality-slider" min="10" max="100" value="95" class="flex-1 slider">
                            <span id="jpg-quality-value" class="text-sm text-[var(--text-muted)] min-w-[3rem] text-right">95%</span>
                        </div>
                    </div>
                </div>
                
                <!-- Filename Settings -->
                <div>
                    <div class="flex items-center gap-2 mt-4 mb-2">
                        <label for="export-filename-input" class="block text-sm font-medium text-[var(--text-muted)]" data-translate-key="fileName"></label>
                        <div class="relative info-tooltip-trigger">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="text-[var(--text-muted)] cursor-pointer" width="16" height="16"><path d="M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM11 7H13V9H11V7ZM11 11H13V17H11V11Z"></path></svg>
                            <div class="info-tooltip absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-max max-w-xs bg-slate-900/95 p-3 text-xs text-slate-200 border border-[var(--border-color)] shadow-lg z-10 pointer-events-none">
                                <p data-translate-key="exportInfoTooltip"></p>
                            </div>
                        </div>
                    </div>
                    <div id="filename-container" class="w-full mt-1 flex items-center justify-between py-3 px-2 text-sm bg-slate-700 border border-[var(--border-color)] focus-within:ring-[var(--accent-color)] focus-within:border-[var(--accent-color)]">
                        <input type="text" id="export-filename-input" value="paperima" class="flex-1 bg-transparent border-none outline-none p-0 min-w-0">
                        <span id="file-extension" class="flex-shrink-0 text-[var(--text-muted)] pointer-events-none ml-2">.webm</span>
                    </div>
                </div>
            </div>
            <div class="mt-8 flex justify-end space-x-4">
                <button id="cancel-export-settings-btn" class="px-5 py-2.5 bg-slate-600 text-white text-sm font-semibold hover:bg-slate-500 transition-all duration-150 cursor-pointer" data-translate-key="cancel"></button>
                <button id="start-export-with-settings-btn" class="px-5 py-2.5 bg-[var(--accent-color)] text-white text-sm font-semibold hover:bg-[var(--accent-color-hover)] transition-all duration-150 cursor-pointer" data-translate-key="startExport"></button>
            </div>
        </div>
    </div>
    <!-- Export progress popup -->
    <div id="export-progress-popup" class="hidden popup-overlay flex-col items-center justify-center">
        <h3 data-translate-key="exportingVideo"></h3>
        <p data-translate-key="exportingVideoWait"></p>
        <div id="progress-bar-container">
            <div id="progress-bar-fill">0%</div>
        </div>
        <button id="cancel-export-btn" class="mt-6 px-6 py-2 bg-[var(--danger-color)] text-white text-sm font-semibold hover:bg-[var(--danger-color-hover)] transition-colors cursor-pointer" data-translate-key="cancel"></button>
    </div>

    <!-- Confirmation popup for resetting settings -->
    <div id="confirmation-popup" class="hidden popup-overlay flex items-center justify-center p-4">
        <div class="bg-slate-800 shadow-xl p-8 w-full max-w-sm text-left border border-[var(--border-color)]">
            <h3 id="confirmation-title" class="text-xl font-bold mb-4 text-slate-100"></h3>
            <p id="confirmation-message" class="text-sm text-slate-300 mb-6"></p>
            <div id="reset-images-option" class="hidden items-center space-x-2 mb-6">
                <input type="checkbox" id="confirm-delete-images-checkbox" class="h-4 w-4 bg-slate-600 border-slate-500 text-[var(--accent-color)] focus:ring-[var(--accent-color)]">
                <label for="confirm-delete-images-checkbox" class="text-sm text-slate-300" data-translate-key="deleteImportedImages"></label>
            </div>
            <div class="flex justify-end space-x-4">
                <button id="confirm-cancel-btn" class="px-5 py-2.5 bg-slate-600 text-white text-sm font-semibold hover:bg-slate-500 transition-all duration-150 cursor-pointer" data-translate-key="cancel"></button>
                <button id="confirm-continue-btn" class="px-5 py-2.5 bg-[var(--danger-color)] text-white text-sm font-semibold hover:bg-[var(--danger-color-hover)] transition-all duration-150 cursor-pointer" data-translate-key="continue"></button>
            </div>
        </div>
    </div>
    <!-- License popup -->
    <div id="license-popup" class="hidden popup-overlay flex items-center justify-center p-4">
        <div class="bg-slate-800 shadow-xl p-8 w-full max-w-sm text-left border border-[var(--border-color)] flex flex-col">
            <h3 class="text-xl font-bold mb-6 text-slate-100 flex-shrink-0" data-translate-key="licenseTitle">GNU Affero General Public License v3.0</h3>
            <div class="space-y-4 md:space-y-4 flex-grow overflow-hidden">
                <div id="license-content" data-translate-key="licenseContent" class="overflow-y-auto">
                    <!-- Content will be populated by translation system -->
                </div>
            </div>
            <div class="mt-8 flex justify-end space-x-4 flex-shrink-0">
                <button id="close-license-popup" class="px-5 py-2.5 bg-slate-600 text-white text-sm font-semibold hover:bg-slate-500 transition-all duration-150 cursor-pointer" data-translate-key="cancel">Tutup</button>
                <a href="https://github.com/nurimator/paperima/blob/main/LICENSE" target="_blank" id="view-full-license-btn" class="px-5 py-2.5 bg-[var(--accent-color)] text-white text-sm font-semibold hover:bg-[var(--accent-color-hover)] transition-all duration-150 cursor-pointer text-center no-underline" data-translate-key="licenseViewFull">Lihat Lisensi Lengkap</a>
            </div>
        </div>
    </div>

<div id="debug-screen" class="hidden"></div>
<div id="processing-notification" class="hidden"></div>
    <script src="./assets/scripts.js"></script>
</body>
</html>